package qlhp;
import java.text.DecimalFormat;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
public abstract class HocPhan {
	protected final String mssv ; 
	protected String hoTen ; 
	protected double hocPhi ; 
	protected LocalDate ngayBatDau  ; 
	protected LocalDate ngayKetThuc ; 
	protected double diemMucTieu ; 
	protected double ketQua ;
	
	// construct mac dinh   = 
	public HocPhan() {
		this.mssv = "";
		this.hoTen = "";
		this.hocPhi = 0.0;
		this.ngayBatDau = LocalDate.now();
		this.ngayKetThuc = LocalDate.now();
		this.diemMucTieu = 0.0;
		this.ketQua = 0.0;
	}
	public HocPhan(String mssv, 
			String hoTen, 
			double hocPhi, 
			LocalDate ngayBatDau, 
			LocalDate ngayKetThuc,
			double diemMucTieu, double ketQua) {
		if(mssv == null | mssv.trim().isEmpty()) { 
			throw new IllegalArgumentException(" ma khong duoc rong ") ; 
		}
		if(diemMucTieu < 0 || diemMucTieu > 990 ) {  
			throw new IllegalArgumentException("diem muc tieu phai tu 0 < 990") ; 
		}
		if(ngayKetThuc.isBefore(ngayBatDau)) { 
			throw new IllegalArgumentException("ngay thuc phai sau ngay bat dau") ; 
		}
		this.mssv = mssv;
		this.hoTen = hoTen;
		this.hocPhi = hocPhi;
		this.ngayBatDau = ngayBatDau;
		this.ngayKetThuc = ngayKetThuc;
		this.diemMucTieu = diemMucTieu;
		this.ketQua = ketQua;
	}
	public String getHoTen() {
		return hoTen;
	}
	public void setHoTen(String hoTen) {
		this.hoTen = hoTen;
	}
	public double getHocPhi() {
		return hocPhi;
	}
	public void setHocPhi(double hocPhi) {
		this.hocPhi = hocPhi;
	}
	public LocalDate getNgayBatDau() {
		return ngayBatDau;
	}
	public void setNgayBatDau(LocalDate ngayBatDau) {
		this.ngayBatDau = ngayBatDau;
	}
	public LocalDate getNgayKetThuc() {
		return ngayKetThuc;
	}
	public void setNgayKetThuc(LocalDate ngayKetThuc) {
		if(ngayKetThuc.isBefore(ngayBatDau)) { 
			throw new IllegalArgumentException("ngay thuc phai sau ngay bat dau") ; 
		}
		this.ngayKetThuc = ngayKetThuc;
	}
	public double getDiemMucTieu() {
		return diemMucTieu;
	}
	public void setDiemMucTieu(double diemMucTieu) {
		if(diemMucTieu < 0 || diemMucTieu > 990 ) {  
			throw new IllegalArgumentException("diem muc tieu phai tu 0 < 990") ; 
		}
		this.diemMucTieu = diemMucTieu;
	}
	public double getKetQua() {
		return ketQua;
	}
	public void setKetQua(double ketQua) {
		this.ketQua = ketQua;
	}
	public String getMssv() {
		return mssv;
	}
	// PHUONG THUC TINH DIEM KHEN THUONG 
	public double tinhKhenThuong() { 
		 double khenThuong = 0 ; 
		 if (ketQua >= diemMucTieu) {
			 khenThuong  = hocPhi *0.2 ;
		 }
		 return khenThuong  ; 
	}

	@Override
public String toString() {
		DecimalFormat formatter  = new DecimalFormat("###,###,###") ; 
		String hocphiforrmat  =  formatter.format(hocPhi) ; 
		DateTimeFormatter formatter1  = DateTimeFormatter.ofPattern("yyyy-MM-dd");
		String ngayBatDauformatterd  = ngayBatDau.format(formatter1) ; 
		String ngayKetThucformatterd  = ngayKetThuc.format(formatter1) ; 
	return String.format ("%s | %s | %s | %s | %s | %.2f | %.2f",
			this.mssv,this.hoTen,
			hocphiforrmat,
			ngayBatDauformatterd ,
			ngayKetThucformatterd,
			this.diemMucTieu , this.ketQua) ;
} 
	
		
	
 

}
